<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace=" open.platform.domain.PlatformResource">
    <!--select column-->
   <sql id="column_list">
       id,
       resource,
       authority,
       created_time AS createdTime,
       modify_time AS modifyTime   
   </sql>
   <!-- 查询条件 -->
   <sql id="WHERE_CLAUSE">
       <trim prefix="WHERE" prefixOverrides="AND">
           <if test="id != null"><![CDATA[AND id = #{id}]]></if>
           <if test="resource != null"><![CDATA[AND resource= #{resource}]]></if>
           <if test="authority != null"><![CDATA[AND authority= #{authority}]]></if>  
       </trim>  
   </sql>
   
   <select id="selectById" parameterType="java.lang.Long" resultType="PlatformResource">
       SELECT
       <include refid="column_list"></include>
       FORM paltform_resource
       WHERE id = #{id}
   </select>
   
   <insert id="save" parameterType="PlatformResource" useGeneratedKeys="true" keyProperty="id">
     <![CDATA[
       INSERT INTO platform_authority (resource,authority,created_time,modify_time)
       VALUES (#{resource},#{authority},NOW(),NOW())  
     ]]>     
   </insert>
   
   <delete id="delete" parameterType="PlatformResource">
   <![CDATA[DELETE FROM
       	paltform_resource]]>
       <include refid="WHERE_CLAUSE"/>   
   </delete>
   
   <delete id="deleteById" parameterType="java.lang.Long">
   <![CDATA[DELETE FROM
       paltform_resource]]>
       WHERE id=#{id}
   </delete>
   
   <select id="search" parameterType="PlatformResource" resultType="PlatformResource">
       <![CDATA[SELECT FROM]]>
       paltform_resource
       <include refid="WHERE_CLAUSE"/>
   </select>
   
   <update id="update" parameterType="">
   <![CDATA[UPDATE]]>
       paltform_resource
   <set>
       <if test="resource != null">
           resource = #{resource}
       </if>
       <if test="authority != null">
           resource = #{authority}
       </if>   
   </set>
  	 WHERE id = #{id}
   </update>
   
</mapper>